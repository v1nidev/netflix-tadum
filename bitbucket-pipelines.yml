image: node:12.18.2

pipelines:
  branches:
    master:
      - step:
          caches:
            - node
          name: Prepare environment and build
          script: 
            - cd frontend
            - yarn install
            - yarn run generate
          artifacts:
            - frontend/dist/**
      - step:
          name: Send files to server the9level
          image: google/cloud-sdk:latest
          script: 
            - scp -r frontend/dist/* cielo@34.74.113.161:/var/www/projects/the9/lv101
    
